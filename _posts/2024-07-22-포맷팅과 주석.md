---
title: Golang과 포맷팅, 주석
date: YYYY-MM-DD HH:MM:SS +09:00
categories: [Go, 개발]
tags:
  [
    go,
    oop,
    포맷팅,
    주석
  ]
---

### 포맷팅
go에서는 gofmt 프로그램이 go 프로그램을 읽은 뒤, 표준 스타일의 들여쓰기와 수직정렬, 유지 그리고 필요시 주석을 재포맷팅한 소스를 내놓는다.

표준 패키지들은 모두 gofmt를 통해 포맷팅 되어있다.

- 들여쓰기
    - 탭을 사용하며, gofmt는 기본값으로 탭을 사용한다. 만약 꼭 써야하는 경우에만 스페이스를 사용한다.
- 한 줄 길이
    - go에는 한 줄 길이에 제한이 없다. 길이가 길어지는 것에 대해 걱정하지 마라. 너무 길면 별도의 탭을 가지고 들여쓰기를 통해 감싸라.
- 괄호
    - Go는 C 와 Java에 비해 적은 수의 괄호가 필요하다. 제어 구조들(if, for, switch)의 문법엔 괄호가 없다.
    
    또한 연산자 우선순위 계층이 간단하며 명확하다.
    
    Go는 다른 언어와 다르게 스페이스의 사용이 함축하는 바가 크다.

### 주석
Go 언어는 C언어 스타일의 /** **/ 블럭 주석과 C++ 스타일의 한줄(line) 주석을 제공한다.

한줄 주석은 일반적으로 사용되고, 블럭주석은 대부분의 패키지 주석을 나타낸다. 

godoc은 패키지의 내용에 대한 문서를 추출하도록 go  소스 파일을 처리한다.

최상위 선언문 이전에 끼어드는 줄바꿈 없이 주석이 나타나면 그 선언문과 함께 추출되어 해당 항목의 설명으로 제공된다.

모든 패키지는 패키지 구문 이전에 블럭주석형태의 패키지 주석이 있어야 한다. 여러 파일로 구성된 패키지의 경우, 패키지 주석은 어느 파일이든 상관없이 하나의 파일에 존재하면 되고 그것이 사용된다. 패키지 주석은 패키지를 소개해야 하고, 전체 패키제애 관련된 정보를 제공해야한다.

패키지가 단순하다면 패키지 주석 또한 간단할 수 있다.

패키지에서 최상위 선언의 바로 앞에 있는 주석이 그 선언의 문서 주석으로 처리된다. 패키지 내부에서 최상위 선언 바로 이전의 주석은 그 선언을 위한 문서주석이다. 프로그램에서 모든 외부로 노출되는 (대문자로 시작되는)이름은

문서 주석이 필요하다.

문서 주석은 완전한 문장으로 작성될때 효과가 제일 좋다.

만약 모든 문서의 주석이 그 주석이 서술하는 항목의 이름으로 시작한다면, godoc의 결과는 grep 문을 이용하는데 유용한 형태로 나온다. 패키지는 각각의 문서 주석을 패키지명과 함께 시작하기 때문에 당신이 찾고 있던 단어를 상시키시는 결과를 본다.
Go언어의 선언 구문은 그룹화가 가능하다. 하나의 문서주석은 관련된 상수 똑은 변수의 그룹에 대해 설명할 수 있어 형식적일 수 있다.
```go
// Error codes returned by failures to parse an expression.
var (
    ErrInternal      = errors.New("regexp: internal error")
    ErrUnmatchedLpar = errors.New("regexp: unmatched '('")
    ErrUnmatchedRpar = errors.New("regexp: unmatched ')'")
    ...
)
```

아래 예제는 그룹화의 항목 간의 관련성을 나타내는 예제다. 아래 변수들의 그룹은 mutexd에 의해 보호되고 있음을 보여준다.
```go
var (
    countLock   sync.Mutex
    inputCount  uint32
    outputCount uint32
    errorCount  uint32
)
```
